#!/usr/bin/perl -w

use strict                       ;

unshift (@INC, '/home/httpd/cgi-bin/') ;

use CXN::Depth                               ;
my $depth = new CXN::Depth                   ;

print $depth -> start_html ;
print $depth -> html -> font(4) ;

my $struct_string = $depth -> cgi -> {vars}{hidden_struct} ;
my $VAR1 ;
my $struct =  eval $struct_string ;
$depth -> set_db(
                 'db' => $struct->{db},
                 'secret'=> $struct->{secret},
                 'write'=>'yes',
                 'upd'=>'yes'
                )                            ;

$depth -> depth_array ( depth_string => $struct->{depth_string} )       ;

print $depth -> vector ( 'uri' => '/cgi-bin/Depth.lib/' )               ;

print $depth -> html -> font(3)                                         ;

print $depth -> form -> start_form ('Upd_Object', 'Upd_Object' )        ;
my $upd_ob_opts_arr = [ 'new_ob', 'extend_ob', 'copy_ob', 'mv_ob', 'link_ob' ] ;
print $depth -> form -> one_line ( 'Upd_Ob_String', 40, undef )."<BR>"  ;
print $depth -> form -> radio ( 'Upd_Ob_Opts', $upd_ob_opts_arr , 'new_ob' )   ;
$struct_string = CXN::Escape::uri_escape($struct_string)                ;

print $depth -> form -> hidden ( 'hidden_struct',  $depth->cgi->{'vars'}{'hidden_struct'} ) ;
print $depth -> form -> button ( "Upd_Object" )                         ; 
print $depth -> form -> end_form                                        ;

print "<HR>"                                                            ;
print $depth->form -> start_form ('Del_Object', 'Del_Object' )          ;
print $depth->form -> hidden ( 'hidden_struct',  $depth->cgi -> {'vars'}{'hidden_struct'} ) ;
print $depth->form -> button ( "Delete" )                               ;
print $depth->form -> end_form                                          ;

print $depth -> html -> text                                            ;
print $depth -> cgi  -> serialize ($depth -> cgi)                       ;
print $depth -> html -> untext                                          ;
print $depth -> html -> end                                             ;

exit;
